<!DOCTYPE html>
<html>
<head>
    <title>Google Maps with Multiple Markers, Notes, and Boundaries</title>
    <style>
        #map {
            height: 520px; /* Updated height to 450px */
            width: 100%;
        }
        .marker-label {
            color: white;
            background-color: white;
            padding: 5px;
            border-radius: 5px;
            font-size: 14px;
            text-align: center;
            width: auto;
            margin-top: -45px;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <script>
        function initMap() {
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 10,
                center: {lat: 44.6794, lng: -79.4272}, // Centered at a common point
                mapTypeId: 'satellite' // Set map type to satellite view
            });

            // Add listener for map loaded event
            google.maps.event.addListenerOnce(map, 'idle', function() {
                console.log('Map loaded');
            });

            // Send POST request to webhook endpoint
            fetch('https://hook.eu1.make.com/gx121uuwuha3bl6etkijrsbme75qf577', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({}) // You can send any additional data if needed
            })
            .then(response => response.json())
            .then(data => {
                // Create markers dynamically
                data.forEach(function(markerInfo, index) {
                    var marker = new google.maps.Marker({
                        position: {lat: markerInfo.lat, lng: markerInfo.lng},
                        map: map,
                        label: {
                            text: markerInfo.label, // Note number
                            className: "marker-label"
                        },
                        icon: {
                            url: 'http://maps.google.com/mapfiles/ms/icons/' + markerInfo.color + '-dot.png',
                            scaledSize: new google.maps.Size(32, 32)
                        }
                    });
                });

                // Define boundary coordinates
                var boundaryCoords1 = [
                    { lat: 44.677800, lng: -79.254949 },
                    { lat: 44.674293, lng: -79.253364 },
                    { lat: 44.671456, lng: -79.252075 },
                    { lat: 44.669178, lng: -79.251048 },
                    { lat: 44.669728, lng: -79.248582 },
                    { lat: 44.670264, lng: -79.246269 },
                    { lat: 44.671404, lng: -79.241352 },
                    { lat: 44.673639, lng: -79.242433 },
                    { lat: 44.675694, lng: -79.243353 },
                    { lat: 44.679276, lng: -79.244956 },
                    { lat: 44.680008, lng: -79.245283 },
                    { lat: 44.678904, lng: -79.250116 }
                ];
                var boundaryCoords2 = [
                    { lat: 44.682875, lng: -79.246583 },
                    { lat: 44.682418, lng: -79.248275 },
                    { lat: 44.681744, lng: -79.248099 },
                    { lat: 44.680159, lng: -79.247830 },
                    { lat: 44.679827, lng: -79.247758 },
                    { lat: 44.679654, lng: -79.247666 },
                    { lat: 44.680189, lng: -79.245320 }
                ];
                var boundaryCoords3 = [
                    { lat: 44.682875, lng: -79.246583 },
                    { lat: 44.682418, lng: -79.248275 },
                    { lat: 44.681744, lng: -79.248099 },
                    { lat: 44.680159, lng: -79.247830 },
                    { lat: 44.679827, lng: -79.247758 },
                    { lat: 44.679654, lng: -79.247666 },
                    { lat: 44.679576, lng: -79.248006 },
                    { lat: 44.679660, lng: -79.248044 },
                    { lat: 44.679752, lng: -79.247975 },
                    { lat: 44.680092, lng: -79.247970 },
                    { lat: 44.681692, lng: -79.248228 },
                    { lat: 44.682480, lng: -79.248500 },
                    { lat: 44.682801, lng: -79.248560 },
                    { lat: 44.682918, lng: -79.248492 },
                    { lat: 44.683099, lng: -79.248459 },
                    { lat: 44.683780, lng: -79.248600 },
                    { lat: 44.683027, lng: -79.251746 },
                    { lat: 44.683356, lng: -79.251894 },
                    { lat: 44.683569, lng: -79.252203 },
                    { lat: 44.683579, lng: -79.252293 },
                    { lat: 44.684235, lng: -79.253161 },
                    { lat: 44.684629, lng: -79.252404 },
                    { lat: 44.684810, lng: -79.251958 },
                    { lat: 44.684778, lng: -79.251438 },
                    { lat: 44.684961, lng: -79.250873 },
                    { lat: 44.685127, lng: -79.250282 },
                    { lat: 44.686105, lng: -79.249521 },
                    { lat: 44.686352, lng: -79.249211 },
                    { lat: 44.686815, lng: -79.248435 }
                ];
                var boundaryCoords4 = [
                    { lat: 44.679576, lng: -79.248006 },
                    { lat: 44.679660, lng: -79.248044 },
                    { lat: 44.679752, lng: -79.247975 },
                    { lat: 44.680092, lng: -79.247970 },
                    { lat: 44.681692, lng: -79.248228 },
                    { lat: 44.682480, lng: -79.248500 },
                    { lat: 44.682801, lng: -79.248560 },
                    { lat: 44.682918, lng: -79.248492 },
                    { lat: 44.683099, lng: -79.248459 },
                    { lat: 44.683780, lng: -79.248600 },
                    { lat: 44.683027, lng: -79.251746 },
                    { lat: 44.682984, lng: -79.251925 },
                    { lat: 44.679081, lng: -79.250174 }
                ];
                var boundaryCoords5 = [
                    { lat: 44.683027, lng: -79.251746 },
                    { lat: 44.683356, lng: -79.251894 },
                    { lat: 44.683569, lng: -79.252203 },
                    { lat: 44.683579, lng: -79.252293 },
                    { lat: 44.684235, lng: -79.253161 },
                    { lat: 44.684629, lng: -79.252404 },
                    { lat: 44.684810, lng: -79.251958 },
                    { lat: 44.684778, lng: -79.251438 },
                    { lat: 44.684961, lng: -79.250873 },
                    { lat: 44.685127, lng: -79.250282 },
                    { lat: 44.686105, lng: -79.249521 },
                    { lat: 44.686352, lng: -79.249211 },
                    { lat: 44.686815, lng: -79.248435 },
                    { lat: 44.687011, lng: -79.248528 },
                    { lat: 44.688782, lng: -79.249343 },
                    { lat: 44.689614, lng: -79.245504 },
                    { lat: 44.690369, lng: -79.245861 },
                    { lat: 44.690607, lng: -79.244756 },
                    { lat: 44.698469, lng: -79.248463 },
                    { lat: 44.697449, lng: -79.253210 },
                    { lat: 44.697431, lng: -79.253294 },
                    { lat: 44.696474, lng: -79.257732 },
                    { lat: 44.696381, lng: -79.258172 },
                    { lat: 44.692069, lng: -79.256120 },
                    { lat: 44.691011, lng: -79.261031 },
                    { lat: 44.686670, lng: -79.259002 },
                    { lat: 44.683353, lng: -79.257530 },
                    { lat: 44.682335, lng: -79.257041 },
                    { lat: 44.683455, lng: -79.252137 },
                    { lat: 44.682984, lng: -79.251925 }
                ];
                var boundaryCoords6 = [
                    { lat: 44.679081, lng: -79.250174 },
                    { lat: 44.682984, lng: -79.251925 },
                    { lat: 44.683455, lng: -79.252137 },
                    { lat: 44.682335, lng: -79.257041 },
                    { lat: 44.683353, lng: -79.257530 },
                    { lat: 44.686670, lng: -79.259002 },
                    { lat: 44.685613, lng: -79.263841 },
                    { lat: 44.685613, lng: -79.263841 },
                    { lat: 44.681899, lng: -79.262158 },
                    { lat: 44.679878, lng: -79.261234 },
                    { lat: 44.676865, lng: -79.259864 },
                    { lat: 44.677972, lng: -79.255028 }
                ];

                // Combine all boundary coordinates
                var allBoundaryCoords = [
                    boundaryCoords1,
                    boundaryCoords2,
                    boundaryCoords3,
                    boundaryCoords4,
                    boundaryCoords5,
                    boundaryCoords6
                ];

                // Calculate bounds for all boundary coordinates
                var bounds = new google.maps.LatLngBounds();
                allBoundaryCoords.forEach(function(coords) {
                    coords.forEach(function(coord) {
                        bounds.extend(new google.maps.LatLng(coord.lat, coord.lng));
                    });
                });

                // Fit map to all boundary coordinates
                map.fitBounds(bounds);

                // Draw boundary lines
                allBoundaryCoords.forEach(function(coords, index) {
                    var boundary = new google.maps.Polyline({
                        path: coords,
                        geodesic: true,
                        strokeColor: ['#00FFFF', '#FFFF00', '#FFA500', '#FFFF00', '#FF0000', '#00FFFF'][index], // Different color for each boundary
                        strokeOpacity: 1.0,
                        strokeWeight: 1
                    });
                    boundary.setMap(map);
                });
            })
            .catch(error => {
                console.error('Error fetching data:', error);
            });
        }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDEO0_2kf8146iPb4DiTgSZqgsMCtQYktQ&callback=initMap" async defer></script>
</body>
</html>
